<div class="solicitud-container">
  <!-- Header con título e ícono -->
  <div class="page-header">
    <div class="header-content">
      <div class="title-section">
        <div class="icon-circle">
          <ion-icon name="document-text-outline"></ion-icon>
        </div>
        <div class="title-info">
          <h1 class="page-title">Solicitudes de Aceptación</h1>
          <p class="page-subtitle">Inicio / Carta de Aceptación</p>
        </div>
      </div>
    </div>
    <div class="header-buttons">
      <button class="btn-refresh" (click)="refrescarDatos()" [disabled]="loading">
        <ion-icon name="refresh-outline"></ion-icon>
        {{ loading ? 'Actualizando...' : 'Actualizar' }}
      </button>
      <button class="btn-crear" (click)="abrirModalCrearCarta()">
        <ion-icon name="add-outline"></ion-icon>
        Crear Carta
      </button>
    </div>
  </div>

  <!-- Filtros superiores -->
  <div class="filters-container">
    <div class="filter-item">
      <label>Empresa</label>
      <select [(ngModel)]="filtroEmpresa" class="form-select">
        <option value="">Selecciona Empresa</option>
        <!-- Opciones dinámicas -->
      </select>
    </div>
    <div class="filter-item">
      <label>Semestre Académico</label>
      <select [(ngModel)]="filtroSemestre" class="form-select">
        <option value="2025-2">2025-2</option>
        <option value="2024-2">2024-2</option>
        <option value="2024-1">2024-1</option>
      </select>
    </div>
    <div class="button-item">
      <label>Filtrar Solicitudes</label>
      <button class="btn-apply" (click)="aplicarFiltros()">
        <ion-icon name="funnel-outline"></ion-icon>
        Aplicar búsqueda
      </button>
    </div>
  </div>

  <!-- Lista de solicitudes -->
  <div class="solicitudes-list">
    <div class="solicitud-card" *ngFor="let solicitud of solicitudes">
      <h2>Carta de Aceptación</h2>
      <p>Empresa: {{ solicitud.empresa }}</p>
      <p>Practicante: {{ solicitud.practicante }}</p>
      <button class="btn-descargar">
        <ion-icon name="download-outline"></ion-icon>
        Descargar Carta
      </button>
    </div>
  </div>
</div>

<!-- Modal Crear Carta -->
<div class="modal-overlay" *ngIf="mostrarModal" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Crear Nueva Carta de Aceptación</h2>
      <button class="btn-close" (click)="cerrarModal()">
        <ion-icon name="close-outline"></ion-icon>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-section">
        <h3>Información General</h3>
        <div class="form-group">
          <label>Facultad</label>
          <input type="text" [(ngModel)]="nuevaCarta.facultad" class="form-input" 
                 placeholder="FACULTAD DE INGENIERIA Y ARQUITECTURA">
        </div>
        <div class="form-group">
          <label>Nombre del Año</label>
          <input type="text" [(ngModel)]="nuevaCarta.nombreanio" class="form-input" 
                 placeholder="Año de la recuperación y consolidación...">
        </div>
        <div class="form-group">
          <label>Fecha</label>
          <input type="text" [(ngModel)]="nuevaCarta.fecha" class="form-input" 
                 placeholder="Morales, 07 de abril de 2025">
        </div>
        <div class="form-group">
          <label>Número de Carta</label>
          <input type="text" [(ngModel)]="nuevaCarta.numeroCarta" class="form-input" 
                 placeholder="Carta N° 013-2025/UPeU-FIA-IS-PPP">
        </div>
      </div>

      <div class="form-section">
        <h3>Destinatario</h3>
        <div class="form-group">
          <label>Nombre del Destinatario</label>
          <input type="text" [(ngModel)]="nuevaCarta.destinatarioNombre" class="form-input" 
                 placeholder="Ing. CALEB ISAI IZQUIERDO JIMENEZ">
        </div>
        <div class="form-group">
          <label>Cargo</label>
          <input type="text" [(ngModel)]="nuevaCarta.destinatarioCargo" class="form-input" 
                 placeholder="Gerente">
        </div>
        <div class="form-group">
          <label>Empresa</label>
          <input type="text" [(ngModel)]="nuevaCarta.destinatarioEmpresa" class="form-input" 
                 placeholder="UNIVERSIDAD PERUANA UNION">
        </div>
        <div class="form-group">
          <label>Ciudad</label>
          <input type="text" [(ngModel)]="nuevaCarta.destinatarioCiudad" class="form-input" 
                 placeholder="Morales">
        </div>
      </div>

      <div class="form-section">
        <h3>Datos del Estudiante</h3>
        <div class="form-group">
          <label>Nombre Completo del Estudiante</label>
          <input type="text" [(ngModel)]="nuevaCarta.estudianteNombre" class="form-input" 
                 placeholder="Caleb Isai Izquierdo Jiménez">
        </div>
        <div class="form-group">
          <label>Código Universitario</label>
          <input type="text" [(ngModel)]="nuevaCarta.estudianteCodigo" class="form-input" 
                 placeholder="201720255">
        </div>
        <div class="form-group">
          <label>Ciclo</label>
          <input type="text" [(ngModel)]="nuevaCarta.estudianteCiclo" class="form-input" 
                 placeholder="VII">
        </div>
        <div class="form-group">
          <label>Escuela Profesional</label>
          <input type="text" [(ngModel)]="nuevaCarta.estudianteEscuela" class="form-input" 
                 placeholder="Ingeniería de Sistemas">
        </div>
        <div class="form-group">
          <label>Facultad del Estudiante</label>
          <input type="text" [(ngModel)]="nuevaCarta.estudianteFacultad" class="form-input" 
                 placeholder="Facultad de Ingeniería y Arquitectura">
        </div>
        <div class="form-group">
          <label>Horas de Práctica</label>
          <input type="text" [(ngModel)]="nuevaCarta.estudianteHoras" class="form-input" 
                 placeholder="700">
        </div>
      </div>

      <div class="form-section">
        <h3>Contenido de la Carta</h3>
        <div class="form-group">
          <label>Saludo</label>
          <input type="text" [(ngModel)]="nuevaCarta.saludo" class="form-input" 
                 placeholder="De mi especial consideración:">
        </div>
        <div class="form-group">
          <label>Primer Párrafo</label>
          <textarea [(ngModel)]="nuevaCarta.cuerpo1" class="form-textarea" rows="2"
                    placeholder="Tengo el agrado de dirigirme a usted..."></textarea>
        </div>
        <div class="form-group">
          <label>Segundo Párrafo (Se generará automáticamente con los datos del estudiante)</label>
          <textarea class="form-textarea" rows="4" readonly
                    [value]="segundoParrafoGenerado"></textarea>
        </div>
        <div class="form-group">
          <label>Tercer Párrafo</label>
          <textarea [(ngModel)]="nuevaCarta.cuerpo3" class="form-textarea" rows="2"
                    placeholder="Quedo muy agradecido por su gentil atención..."></textarea>
        </div>
        <div class="form-group">
          <label>Despedida</label>
          <input type="text" [(ngModel)]="nuevaCarta.despedida" class="form-input" 
                 placeholder="Cordialmente,">
        </div>
      </div>

      <div class="form-section">
        <h3>Firma</h3>
        <div class="form-group">
          <label>Nombre del Firmante</label>
          <input type="text" [(ngModel)]="nuevaCarta.firmaNombre" class="form-input" 
                 placeholder="Mg. Wilder Marlo Rimarachin">
        </div>
        <div class="form-group">
          <label>Cargo del Firmante</label>
          <textarea [(ngModel)]="nuevaCarta.firmaCargo" class="form-textarea" rows="2"
                    placeholder="Coordinador&#10;E.P. Ingeniería de Sistemas"></textarea>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-cancel" (click)="cerrarModal()">Cancelar</button>
      <button class="btn-save" (click)="crearCarta()">
        <ion-icon name="document-outline"></ion-icon>
        Crear Carta
      </button>
    </div>
  </div>
</div>
