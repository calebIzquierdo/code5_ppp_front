<aside class="sidebar" [class.collapsed]="collapsed && !isMobile" [class.mobile-visible]="isMobile && mobileVisible">
  <div class="sidebar-content">
    <ul class="menu-list">
      <li class="dropdown-item" *hasRole="['admin', 'student']">
        <a (click)="togglePracticas()" 
           [class.dropdown-active]="isPracticasOpen"
           [class.has-active-child]="hasActiveChildPracticas()">
          <span class="active-indicator" [class.active]="isPracticasOpen || hasActiveChildPracticas()"></span>
          <ion-icon name="briefcase-outline"></ion-icon>
          <span class="label">Mis Prácticas</span>
          <ion-icon 
            name="chevron-down-outline" 
            class="dropdown-arrow" 
            [class.rotated]="isPracticasOpen">
          </ion-icon>
        </a>
        <ul class="submenu" [class.open]="isPracticasOpen">
          <li>
            <a (click)="navigateAndClose('/oferta-laboral')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="briefcase-outline"></ion-icon>
              <span class="label">Oferta Laboral</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/carta-presentacion')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="mail-open-outline"></ion-icon>
              <span class="label">Carta de Presentación</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/mis-practicas')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="document-text-outline"></ion-icon>
              <span class="label">Mis prácticas</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/solicitar-certificacion')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="ribbon-outline"></ion-icon>
              <span class="label">Solicitar Certificación</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="dropdown-item" *hasRole="['admin', 'reviewer']">
        <a (click)="toggleGestion()" 
           [class.dropdown-active]="isGestionOpen"
           [class.has-active-child]="hasActiveChildGestion()">
          <span class="active-indicator" [class.active]="isGestionOpen || hasActiveChildGestion()"></span>
          <ion-icon name="clipboard-outline"></ion-icon>
          <span class="label">Gestión Prácticas</span>
          <ion-icon 
            name="chevron-down-outline" 
            class="dropdown-arrow" 
            [class.rotated]="isGestionOpen">
          </ion-icon>
        </a>
        <ul class="submenu" [class.open]="isGestionOpen">
          <li>
            <a (click)="navigateAndClose('/gestion-practicas')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="mail-outline"></ion-icon>
              <span class="label">Gestionar Cartas</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/empresa')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="business-outline"></ion-icon>
              <span class="label">Empresas</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/seguimiento')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="analytics-outline"></ion-icon>
              <span class="label">Seguimientos</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="dropdown-item" *hasRole="['admin', 'reviewer']">
        <a (click)="toggleSetup()" 
           [class.dropdown-active]="isSetupOpen"
           [class.has-active-child]="hasActiveChildSetup()">
          <span class="active-indicator" [class.active]="isSetupOpen || hasActiveChildSetup()"></span>
          <ion-icon name="settings-outline"></ion-icon>
          <span class="label">Setup</span>
          <ion-icon 
            name="chevron-down-outline" 
            class="dropdown-arrow" 
            [class.rotated]="isSetupOpen">
          </ion-icon>
        </a>
        <ul class="submenu" [class.open]="isSetupOpen">
          <li>
            <a (click)="navigateAndClose('/practicantes')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="people-outline"></ion-icon>
              <span class="label">Practicantes</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/tipos')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="list-outline"></ion-icon>
              <span class="label">Tipo de Práctica</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/gestion-horas')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="time-outline"></ion-icon>
              <span class="label">Gestión Horas</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="dropdown-item" *hasRole="['admin', 'reviewer']">
        <a (click)="toggleReportes()" 
           [class.dropdown-active]="isReportesOpen"
           [class.has-active-child]="hasActiveChildReportes()">
          <span class="active-indicator" [class.active]="isReportesOpen || hasActiveChildReportes()"></span>
          <ion-icon name="bar-chart-outline"></ion-icon>
          <span class="label">Reportes</span>
          <ion-icon 
            name="chevron-down-outline" 
            class="dropdown-arrow" 
            [class.rotated]="isReportesOpen">
          </ion-icon>
        </a>
        <ul class="submenu" [class.open]="isReportesOpen">
          <li>
            <a (click)="navigateAndClose('/certificacion')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="ribbon-outline"></ion-icon>
              <span class="label">Certificación</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/general-reporte')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="document-text-outline"></ion-icon>
              <span class="label">General Reporte</span>
            </a>
          </li>
        </ul>
      </li>

      <li *hasRole="['admin', 'reviewer']">
        <a (click)="navigateAndClose('/solicitudes')" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
          <span class="active-indicator"></span>
          <ion-icon name="documents-outline"></ion-icon>
          <span class="label">Solicitudes</span>
        </a>
      </li>
    </ul>
  </div>

  <div class="bottom-buttons">
    <button (click)="logout()">
      <ion-icon name="log-out-outline"></ion-icon>
      <span class="label">Cerrar Sesión</span>
    </button>
  </div>
</aside>

<div class="sidebar-overlay" *ngIf="isMobile && mobileVisible" (click)="toggleMobileVisibility()"></div>