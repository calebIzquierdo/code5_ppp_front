<aside class="sidebar" [class.collapsed]="collapsed && !isMobile" [class.mobile-visible]="isMobile && mobileVisible">
  <div class="sidebar-content">
    <ul class="menu-list">
      <li class="dropdown-item" *hasRole="['admin', 'student']">
        <a (click)="togglePracticas()" [class.dropdown-active]="isPracticasOpen"
          [class.has-active-child]="hasActiveChildPracticas()">
          <span class="active-indicator" [class.active]="isPracticasOpen || hasActiveChildPracticas()"></span>
          <ion-icon name="briefcase-outline"></ion-icon>
          <span class="label">Mis Prácticas</span>
          <ion-icon name="chevron-down-outline" class="dropdown-arrow" [class.rotated]="isPracticasOpen">
          </ion-icon>
        </a>
        <ul class="submenu" [class.open]="isPracticasOpen">
          <li>
            <a (click)="navigateAndClose('/oferta-laboral')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="briefcase-outline"></ion-icon>
              <span class="label">Oferta Laboral</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/carta-presentacion')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="mail-open-outline"></ion-icon>
              <span class="label">Carta de Presentación</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/mis-practicas')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="document-text-outline"></ion-icon>
              <span class="label">Mis prácticas</span>
            </a>
          </li>
           <li>
            <a (click)="navigateAndClose('/estado-capsi')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="create-outline"></ion-icon>
              <span class="label">Estado CAPSI</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/solicitar-certificacion')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="ribbon-outline"></ion-icon>
              <span class="label">Solicitar Certificación</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="dropdown-item" *hasRole="['admin', 'reviewer']">
        <a (click)="toggleGestion()" [class.dropdown-active]="isGestionOpen"
          [class.has-active-child]="hasActiveChildGestion()">
          <span class="active-indicator" [class.active]="isGestionOpen || hasActiveChildGestion()"></span>
          <ion-icon name="clipboard-outline"></ion-icon>
          <span class="label">Gestión Prácticas</span>
          <ion-icon name="chevron-down-outline" class="dropdown-arrow" [class.rotated]="isGestionOpen">
          </ion-icon>
        </a>
        <ul class="submenu" [class.open]="isGestionOpen">
          <li>
            <a (click)="navigateAndClose('/gestion-practicas')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="mail-outline"></ion-icon>
              <span class="label">Gestionar Cartas</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/empresa')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="business-outline"></ion-icon>
              <span class="label">Empresas</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/seguimiento')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="analytics-outline"></ion-icon>
              <span class="label">Seguimientos</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/evaluacion-capsi')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="custom-icon">
                <path d="M16.8438 0H1.71875C1.26291 0 0.825738 0.181082 0.50341 0.50341C0.181082 0.825738 0 1.26291 0 1.71875V15.4688C2.06147e-05 15.6446 0.0449834 15.8174 0.130618 15.971C0.216253 16.1245 0.339716 16.2536 0.489282 16.346C0.638847 16.4384 0.809549 16.491 0.985175 16.4988C1.1608 16.5067 1.33552 16.4695 1.49273 16.3909L3.78125 15.247L6.06977 16.3909C6.21304 16.4626 6.37104 16.4999 6.53125 16.4999C6.69146 16.4999 6.84946 16.4626 6.99273 16.3909L9.28125 15.247L11.5698 16.3909C11.713 16.4626 11.871 16.4999 12.0312 16.4999C12.1915 16.4999 12.3495 16.4626 12.4927 16.3909L14.7812 15.247L17.0698 16.3909C17.227 16.4695 17.4017 16.5067 17.5773 16.4988C17.753 16.491 17.9237 16.4384 18.0732 16.346C18.2228 16.2536 18.3462 16.1245 18.4319 15.971C18.5175 15.8174 18.5625 15.6446 18.5625 15.4688V1.71875C18.5625 1.26291 18.3814 0.825738 18.0591 0.50341C17.7368 0.181082 17.2996 0 16.8438 0ZM16.5 13.7998L15.2427 13.1716C15.0995 13.0999 14.9415 13.0626 14.7812 13.0626C14.621 13.0626 14.463 13.0999 14.3198 13.1716L12.0312 14.3155L9.74273 13.1716C9.59946 13.0999 9.44146 13.0626 9.28125 13.0626C9.12104 13.0626 8.96304 13.0999 8.81977 13.1716L6.53125 14.3155L4.24273 13.1716C4.09946 13.0999 3.94146 13.0626 3.78125 13.0626C3.62104 13.0626 3.46304 13.0999 3.31977 13.1716L2.0625 13.7998V2.0625H16.5V13.7998ZM3.66352 11.5784C3.90808 11.7007 4.19123 11.7209 4.4507 11.6346C4.71016 11.5482 4.92469 11.3623 5.04711 11.1177L5.27828 10.6562H8.47172L8.70289 11.1177C8.76229 11.2408 8.84556 11.3509 8.94787 11.4415C9.05019 11.5322 9.16949 11.6016 9.29886 11.6457C9.42823 11.6898 9.56508 11.7077 9.70145 11.6985C9.83782 11.6892 9.97099 11.653 10.0932 11.5918C10.2154 11.5306 10.3243 11.4458 10.4134 11.3422C10.5026 11.2386 10.5702 11.1183 10.6125 10.9883C10.6547 10.8583 10.6707 10.7212 10.6595 10.5849C10.6482 10.4487 10.61 10.3161 10.5471 10.1948L7.79711 4.69477C7.71141 4.52361 7.57976 4.37968 7.4169 4.2791C7.25405 4.17852 7.06641 4.12524 6.875 4.12524C6.68359 4.12524 6.49595 4.17852 6.3331 4.2791C6.17024 4.37968 6.03859 4.52361 5.95289 4.69477L3.20289 10.1948C3.08053 10.4393 3.06031 10.7225 3.14669 10.9819C3.23307 11.2414 3.41898 11.4559 3.66352 11.5784ZM7.44047 8.59375H6.30953L6.875 7.46195L7.44047 8.59375ZM10.6562 7.90625C10.6562 7.63275 10.7649 7.37044 10.9583 7.17705C11.1517 6.98365 11.414 6.875 11.6875 6.875H12.0312V6.53125C12.0312 6.25775 12.1399 5.99544 12.3333 5.80205C12.5267 5.60865 12.789 5.5 13.0625 5.5C13.336 5.5 13.5983 5.60865 13.7917 5.80205C13.9851 5.99544 14.0938 6.25775 14.0938 6.53125V6.875H14.4375C14.711 6.875 14.9733 6.98365 15.1667 7.17705C15.3601 7.37044 15.4688 7.63275 15.4688 7.90625C15.4688 8.17975 15.3601 8.44206 15.1667 8.63545C14.9733 8.82885 14.711 8.9375 14.4375 8.9375H14.0938V9.28125C14.0938 9.55475 13.9851 9.81706 13.7917 10.0105C13.5983 10.2038 13.336 10.3125 13.0625 10.3125C12.789 10.3125 12.5267 10.2038 12.3333 10.0105C12.1399 9.81706 12.0312 9.55475 12.0312 9.28125V8.9375H11.6875C11.414 8.9375 11.1517 8.82885 10.9583 8.63545C10.7649 8.44206 10.6562 8.17975 10.6562 7.90625Z" fill="white"/>
              </svg>
              <span class="label">Evaluacion Capsi</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="dropdown-item" *hasRole="['admin', 'reviewer']">
        <a (click)="toggleSetup()" [class.dropdown-active]="isSetupOpen"
          [class.has-active-child]="hasActiveChildSetup()">
          <span class="active-indicator" [class.active]="isSetupOpen || hasActiveChildSetup()"></span>
          <ion-icon name="settings-outline"></ion-icon>
          <span class="label">Setup</span>
          <ion-icon name="chevron-down-outline" class="dropdown-arrow" [class.rotated]="isSetupOpen">
          </ion-icon>
        </a>
        <ul class="submenu" [class.open]="isSetupOpen">
          <li>
            <a (click)="navigateAndClose('/practicantes')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="people-outline"></ion-icon>
              <span class="label">Practicantes</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/tipos')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="list-outline"></ion-icon>
              <span class="label">Tipo de Práctica</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/gestion-horas')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="time-outline"></ion-icon>
              <span class="label">Gestión Horas</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="dropdown-item" *hasRole="['admin', 'reviewer']">
        <a (click)="toggleReportes()" [class.dropdown-active]="isReportesOpen"
          [class.has-active-child]="hasActiveChildReportes()">
          <span class="active-indicator" [class.active]="isReportesOpen || hasActiveChildReportes()"></span>
          <ion-icon name="bar-chart-outline"></ion-icon>
          <span class="label">Reportes</span>
          <ion-icon name="chevron-down-outline" class="dropdown-arrow" [class.rotated]="isReportesOpen">
          </ion-icon>
        </a>
        <ul class="submenu" [class.open]="isReportesOpen">
          <li>
            <a (click)="navigateAndClose('/certificacion')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="ribbon-outline"></ion-icon>
              <span class="label">Certificación</span>
            </a>
          </li>
          <li>
            <a (click)="navigateAndClose('/general-reporte')" routerLinkActive="active"
              [routerLinkActiveOptions]="{exact: false}">
              <span class="active-indicator"></span>
              <ion-icon name="document-text-outline"></ion-icon>
              <span class="label">General Reporte</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="bottom-buttons">
    <button (click)="logout()">
      <ion-icon name="log-out-outline"></ion-icon>
      <span class="label">Cerrar Sesión</span>
    </button>
  </div>
</aside>

<div class="sidebar-overlay" *ngIf="isMobile && mobileVisible" (click)="toggleMobileVisibility()"></div>